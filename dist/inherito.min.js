'use strict';

var inHerito = (function () {

	'use strict';

	var

	/** 
  * @private 
  * Log object if object has debug set to true
 */
	logObject = function logObject(instance) {
		Object.defineProperty(instance.props, 'debug', { writable: false, enumerable: false });
		console.dir(instance);
	},
	   

	/** 
  * @private 
  * Merge parent's props into instance if indicated otherwise inherit all by default in JS manner
 */
	inherit = function inherit(instance, superProps) {
		// Internal calls are inaccessible
		Object.defineProperty(instance.props, 'inherit', { writable: false, enumerable: false });
		var mixins = instance.props.inherit;

		if (mixins.length > 1) {
			Object.appendChain = function (oChain, oProto) {
				if (arguments.length < 2) {
					throw new TypeError('Object.appendChain - Not enough arguments');
				}
				if (typeof oProto === 'number' || typeof oProto === 'boolean') {
					throw new TypeError('second argument to Object.appendChain must be an object or a string');
				}

				var oNewProto = oProto,
				    oReturn = o2nd = oLast = oChain instanceof this ? oChain : new oChain.constructor(oChain);

				for (var o1st = this.getPrototypeOf(o2nd); o1st !== Object.prototype && o1st !== Function.prototype; o1st = this.getPrototypeOf(o2nd)) {
					o2nd = o1st;
				}

				if (oProto.constructor === String) {
					oNewProto = Function.prototype;
					oReturn = Function.apply(null, Array.prototype.slice.call(arguments, 1));
					this.setPrototypeOf(oReturn, oLast);
				}

				this.setPrototypeOf(o2nd, oNewProto);
				return oReturn;
			};
		} else {
			var protoObject = undefined;
			mixins.map(function (currentValue) {
				protoObject = Object.setPrototypeOf(instance, superProps.props[currentValue]);
			});
		}
	},
	   

	/** 
  * @private
  * Render object to DOM if specified in object creation
  * Prototype, do not use for production yet
 */
	render = function render(instance) {
		if (instance.props.view) {
			var view = instance.props.view;
			view.template.src = view.imageUrl;
			view.parent.querySelector(view.context).appendChild(view.template);
		} else {
			console.error('instance does not have a view');
		}
	},
	   

	/**
  * @public
  * Create object instance and log or render if true
 */
	createObject = function createObject() {
		var instance = Object.create(this),
		    superProps = this;

		// set only the new properties

		for (var _len = arguments.length, options = Array(_len), _key = 0; _key < _len; _key++) {
			options[_key] = arguments[_key];
		}

		options.map(function (currentValue) {
			instance.props = currentValue;
		});

		// options if provided
		instance.props['view'] ? render(instance) : false;
		Array.isArray(instance.props['inherit']) ? inherit(instance, superProps) : false;
		instance.props['debug'] ? logObject(instance) : false;

		return instance;
	};

	// public api
	return {
		create: createObject
	};
})();
//# sourceMappingURL=inherito.min.js.map
